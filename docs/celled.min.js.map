{"version":3,"file":"celled.min.js","sources":["../src/lib/events.ts","../src/lib/dom.ts","../src/lib/css.ts","../src/lib/cell.ts","../src/lib/row.ts","../src/lib/render.ts","../src/lib/grid.ts","../src/lib/csv.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["EventEmitter","constructor","this","handlers","addHandler","event","handler","push","removeHandler","splice","indexOf","emit","args","forEach","_a","createElement","html","div","document","innerHTML","trim","firstChild","on","element","listener","addEventListener","removeEventListener","offFunc","off","remove","node","parentNode","parentElement","removeChild","CSS_PREFIX","CSS_CONTAINER","CSS_CONTAINER_SCROLL","CSS_GRID","CSS_ROW","CSS_CELL","CSS_SELECT_CELL","CSS_HEAD","CSS_HEAD_STICKY","CSS_RESIZER","CSS_EDITING","CSS_ACTIVE","CSS_SELECTED","CSS_READONLY","InputCell","row","col","value","readonly","isActive","isSelected","extraCss","isPlainValue","val","String","css","destroy","elem","appendChild","valueElement","setAttribute","setCss","selected","select","doSelect","activate","doActivate","input","blur","set","setValue","isDefined","toString","className","cssIf","startEdit","textContent","style","width","offsetWidth","focus","takesKey","takesMouse","valueSpan","createTextNode","SelectCell","callback","options","selectElement","i","length","option","optionElement","setOptions","selectContent","useValue","Row","cells","index","map","cell","columnIndex","createCell","updateValueCallback","Array","isArray","DefaultRenderer","rerender","rows","grid","head","r","VirtualRenderer","container","gridContainer","onScroll","current","viewportHeight","undefined","itemCount","start","end","rowHeight","position","updateFunc","scrollTop","offsetHeight","totalContentHeight","startIndex","Math","floor","max","visibleNodesCount","ceil","min","endIndex","maxOffsetY","offsetY","lastItemIndex","noMoreItemsAvailable","newRangeDiffers","heightChanged","desiredRenderHeight","headerHeight","renderedHeight","fragment","createDocumentFragment","rowElement","numberOfRenderedItems","height","animationFrame","e","cancelAnimationFrame","requestAnimationFrame","target","trueOr","elOrCss","cssSelector","events","cleanups","querySelector","init","scroll","enabled","virtualScroll","stickyHeader","getScrollOptions","cellInput","hiddenInput","classList","add","cols","c","createHeadCell","renderOptions","render","createRows","initMouse","initKeys","initClipboard","resetColumnWidths","resizeObserver","ResizeObserver","updateColumnWidths","observe","disconnect","update","rowIndex","colIndex","updateValue","addRows","apply","createAndAddRow","emitInput","flattenCells","renderRows","addRow","headCells","getHeadCells","parentWidth","usedWidth","usedCells","colOptions","widthOption","remainingWidth","remainingCells","initialWidth","columnWidths","getAttribute","previousTotalWidth","reduce","sum","scale","slice","call","querySelectorAll","text","name","column","resizer","downPosition","nextColumn","currentWidth","currentNextWidth","selection","mousemove","ciAttr","ci","isNaN","minCol","maxCol","emitSelect","diff","pageX","mouseup","cleanupMousedown","nextElementSibling","focusHiddenInput","activeCell","preventDefault","preventScroll","downCellIndex","downRowIndex","selectionIdentifier","rememberSelection","r1","c1","r2","c2","findTargetCell","level","cellIndexAttr","rowIndexAttr","cellIndex","getTargetCell","moveEvent","targetCell","firstRow","lastRow","firstCol","lastCol","newSelectionIdentifier","unselect","ri","lastMouseDown","Date","now","timeSinceLast","emitFocus","cleanupMouseup","selectionChanged","moveActive","rowDelta","colDelta","canAddRows","nextRow","keyCode","window","setCell","pasteCSV","csvText","separator","startRow","startCol","csv","str","delimiter","arr","quote","currentChar","nextChar","parseCSV","csvRow","csvRowIndex","tableRow","prevRow","tableCol","isLastEmptyRow","csvCell","csvColIndex","cleanupPaste","clipboardData","getData","cleanupCopy","selectedCells","filter","setData","values","linebreak","content","replace","search","writeCSV","rowOption","cellValue"],"mappings":"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"}