{"version":3,"file":"celled.min.js","sources":["../src/lib/events.ts","../src/lib/dom.ts","../src/lib/css.ts","../src/lib/cell.ts","../src/lib/row.ts","../src/lib/render.ts","../src/lib/grid.ts","../src/lib/csv.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["EventEmitter","constructor","this","handlers","addHandler","event","handler","push","removeHandler","splice","indexOf","emit","args","forEach","_a","createElement","html","div","document","innerHTML","trim","firstChild","on","element","listener","addEventListener","removeEventListener","offFunc","off","remove","node","parentNode","parentElement","removeChild","CSS_PREFIX","CSS_CONTAINER","CSS_CONTAINER_SCROLL","CSS_GRID","CSS_ROW","CSS_CELL","CSS_SELECT_CELL","CSS_HEAD","CSS_HEAD_STICKY","CSS_RESIZER","CSS_EDITING","CSS_ACTIVE","CSS_SELECTED","CSS_READONLY","InputCell","row","col","value","readonly","isActive","isSelected","extraCss","isPlainValue","val","String","css","destroy","elem","appendChild","valueElement","setAttribute","setCss","selected","select","doSelect","activate","doActivate","input","blur","set","setValue","isDefined","strValue","className","cssIf","startEdit","textContent","style","width","offsetWidth","focus","takesKey","takesMouse","valueSpan","createTextNode","SelectCell","callback","options","selectElement","i","length","option","optionElement","setOptions","toString","selectContent","useValue","Row","cells","index","map","cell","columnIndex","createCell","updateValueCallback","Array","isArray","DefaultRenderer","rerender","rows","grid","head","r","VirtualRenderer","container","gridContainer","onScroll","current","viewportHeight","undefined","itemCount","start","end","rowHeight","position","updateFunc","scrollTop","offsetHeight","totalContentHeight","startIndex","Math","floor","max","visibleNodesCount","ceil","min","endIndex","maxOffsetY","offsetY","lastItemIndex","noMoreItemsAvailable","newRangeDiffers","heightChanged","desiredRenderHeight","headerHeight","renderedHeight","fragment","createDocumentFragment","rowElement","numberOfRenderedItems","height","animationFrame","e","cancelAnimationFrame","requestAnimationFrame","target","trueOr","elOrCss","cssSelector","events","cleanups","querySelector","init","scroll","enabled","virtualScroll","stickyHeader","getScrollOptions","cellInput","type","createCellInput","hiddenInput","classList","add","cols","c","createHeadCell","renderOptions","render","createRows","initMouse","initKeys","initClipboard","resetColumnWidths","resizeObserver","ResizeObserver","updateColumnWidths","observe","disconnect","update","rowIndex","colIndex","updateValue","addRows","apply","createAndAddRow","emitInput","flattenCells","renderRows","addRow","headCells","getHeadCells","parentWidth","usedWidth","usedCells","colOptions","widthOption","remainingWidth","remainingCells","initialWidth","columnWidths","getAttribute","previousTotalWidth","reduce","sum","scale","slice","call","querySelectorAll","text","name","column","resizer","downPosition","nextColumn","currentWidth","currentNextWidth","selection","mousemove","ciAttr","ci","isNaN","minCol","maxCol","emitSelect","diff","pageX","mouseup","cleanupMousedown","nextElementSibling","focusHiddenInput","activeCell","preventDefault","preventScroll","downCellIndex","downRowIndex","selectionIdentifier","rememberSelection","r1","c1","r2","c2","findTargetCell","level","cellIndexAttr","rowIndexAttr","cellIndex","getTargetCell","moveEvent","targetCell","firstRow","lastRow","firstCol","lastCol","newSelectionIdentifier","unselect","ri","lastMouseDown","Date","now","timeSinceLast","emitFocus","cleanupMouseup","selectionChanged","moveActive","rowDelta","colDelta","canAddRows","nextRow","keyCode","window","setCell","pasteCSV","csvText","separator","startRow","startCol","csv","str","delimiter","arr","quote","currentChar","nextChar","parseCSV","csvRow","csvRowIndex","tableRow","prevRow","tableCol","isLastEmptyRow","csvCell","csvColIndex","cleanupPaste","clipboardData","getData","cleanupCopy","selectedCells","filter","setData","values","linebreak","content","replace","search","writeCSV","rowOption","cellValue"],"mappings":"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"}